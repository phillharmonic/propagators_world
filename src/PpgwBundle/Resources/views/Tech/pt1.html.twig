{% extends 'PpgwBundle::layout.html.twig' %}
{% block stylesheets %}
    {{parent()}}
    <link rel="stylesheet" href="{{asset('bundles/ppgw/css/symblog.css')}}" type="text/css" />
    <link rel="stylesheet" href="{{asset('bundles/ppgw/css/coding.css')}}" type="text/css" />
{% endblock%}
{% block title %}Symblog - Configuration and Templating{% endblock%}
{% block sidebar %}
    {% render controller("PpgwBundle:Tech:tableOfContents") %}
{% endblock %}
{% block body %}
    <div class='symblog'>
    <div class="section-header"><h1>[ Part 1 ] - Symfony2 Configuration and Templating</h1>
        <ul class="page-nav">
            <li><a href="#">Code Behind</a></li>
            <li><a href="#">Comment</a></li>
        </ul>
    </div>
    <div class="section-header"><span class="title"><h2>Overview</h2></span></div>
    <div class='tech-body'>
        <p>
            This chapter will cover the first steps when creating a Symfony2 website. We will download and 
            configure the Symfony2 
            <a href="http://symfony.com/doc/current/glossary.html#term-distribution">Standard Distribution</a>, 
            create the Blog bundle and put together the main HTML templates. At the end of this chapter you 
            will have configured a Symfony2 website that will be available via a local domain, eg <tt class="docutils literal">
            <span class="pre">http://symblog.dev/</span></tt>. The website will contain the main HTML structure of the blog along with some dummy content.
        </p><p>
            The following areas will be demonstrated in this chapter:
        </p>
        <ol class='arabic simple'>
            <li>Setting up a Symfony2 application</li>
            <li>Configuring a development domain</li>
            <li>Symfony2 Bundles</li>
            <li>Routing</li>
            <li>Controllers</li>
            <li>Templating with Twig</li>
        </ol>
        </p>
        <div class="section-header"><span class="title"><h2>Download and Setup</h2></span></div>
        <p>
            As stated above we will be using the Symfony2 Standard Distribution. This distribution comes 
            complete with the Symfony2 core libraries and the most common bundles required to create 
            websites. You can <a href="http://symfony.com/download">Download</a> the Symfony2 package from 
            the Symfony2 website. As I donâ€™t want to repeat the excellent documentation provided by the 
            Symfony2 book, please refer to the 
            <a href="http://symfony.com/doc/current/book/installation.html">Installing and Configuring Symfony2</a> 
            chapter for detailed requirements. This will guide you through the process of which package to download, 
            how to install the required vendors, and how to correctly permission folders.
        </p>
        <div class="admonition warning">
            <p class="first admonition-title">Warning</p>
            <p class="last">It is important to pay special attention to the
            <a class="reference external" href="http://symfony.com/doc/current/book/installation.html#configuration-and-setup">Setting up Permissions</a>
            section in the Installation chapter. This explains the various ways you
            should permission the <tt class="docutils literal"><span class="pre">app/cache</span></tt> and <tt class="docutils literal"><span class="pre">app/logs</span></tt> folders so the web
            server user and command line user have write access to them.</p>
        </div>
        <div class="section-header"><span class="title"><h2>Creating a Development Domain</h2></span></div>
        <p>For the purpose of this tutorial we will be using the local domain
            <tt class="docutils literal"><span class="pre">http://symblog.dev/</span></tt>, however you can choose any domain you want. These
            instructions are specific to <a class="reference external" href="http://httpd.apache.org/">Apache</a> and assume you
            already have Apache setup and running on your machine. If you are comfortable
            with setting up local domains, or use a different web server such as
            <a class="reference external" href="http://nginx.net/">nginx</a> you can skip this section.
        </p>
        <div class="admonition note">
            <p class="first admonition-title">Note</p>
            <p class="last">These steps were performed on the Linux distribution Fedora so
            path names, etc, may differ depending on your Operating System.</p>
        </div>
        <p>Lets begin by creating a virtual host with Apache. Locate the Apache configuration
        file and append the following settings, making sure to change the <tt class="docutils literal"><span class="pre">DocumentRoot</span></tt>
        and <tt class="docutils literal"><span class="pre">Directory</span></tt> paths accordingly. The location and name of
        the Apache configuration can vary a lot depending on your OS. In Fedora
        its located at <tt class="docutils literal"><span class="pre">/etc/httpd/conf/httpd.conf</span></tt>. You will need to edit this file with
        <tt class="docutils literal"><span class="pre">sudo</span></tt> privileges.</p>
        <div class="highlight-text"><div class="highlight"><pre># /etc/httpd/conf/httpd.conf

        NameVirtualHost 127.0.0.1

        &lt;VirtualHost 127.0.0.1&gt;
          ServerName symblog.dev
          DocumentRoot &quot;/var/www/html/symblog.dev/web&quot;
          DirectoryIndex app.php
          &lt;Directory &quot;/var/www/html/symblog.dev/web&quot;&gt;
            AllowOverride All
            Allow from All
          &lt;/Directory&gt;
        &lt;/VirtualHost&gt;
        </pre></div>
        </div>
        <p>Next add a new domain to the bottom of the host file located at <tt class="docutils literal"><span class="pre">/etc/hosts</span></tt>.
        Again, you will need to edit this file with <tt class="docutils literal"><span class="pre">sudo</span></tt> privileges.</p>
        <div class="highlight-text"><div class="highlight"><pre># /etc/hosts
        127.0.0.1     symblog.dev
        </pre></div>
        </div>
    </div>
    
    <p>Lastly don&#8217;t forget to restart the Apache service. This will reload the
updated configuration settings we have made.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>sudo service httpd restart
</pre></div>
</div>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">If you find yourself creating virtual domains all the time, you can simplify
this process by using
<a class="reference external" href="http://blog.dsyph3r.com/2010/11/apache-dynamic-virtual-hosts.html">Dynamic virtual hosts</a>.</p>
</div>
<p>You should now be able to visit <tt class="docutils literal"><span class="pre">http://symblog.dev/app_dev.php/</span></tt>.</p>
<img alt="Symfony2 welcome page" class="align-center" src="{{asset("bundles/ppgw/images/symblog_screenshots/welcome.jpg")}}" width="725"/>
<p>If this is your first visit to the Symfony2 welcome page, take some time to view
the demo pages. Each demo page provides code snippets that demonstrate how each
page works behind the scenes.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">You will also notice a toolbar at the bottom of the welcome screen. This
is the developer toolbar and provides you will invaluable information
about the state of the application. Information including the page execution time,
memory usage, database queries, authentication state and much more
can be viewed from this toolbar. By default the toolbar is only visible when
running in the <tt class="docutils literal"><span class="pre">dev</span></tt> environment, as providing the toolbar in production
would be a big security risk as it exposes a lot of the internals of your
application. References to the toolbar will be made through this tutorial
as we introduce new features.</p>
</div>
<div class="section-header"><span class="title"><h3>Configuring Symfony: Web Interface</h3></span></div>
<p>Symfony2 introduces a web interface to configure various aspects regarding the
website such as database settings. We require a database for this project so
lets begin using the configurator.</p>
<p>Visit <tt class="docutils literal"><span class="pre">http://symblog.dev/app_dev.php/</span></tt> and click the Configure button. Enter
the details to setup the database (this tutorial assumes the use of MySQL, but
you can choose any other database you have access to), followed by generating a
CSRF token on the next page. You will be presented with the parameter settings
that Symfony2 has generated. Pay attention to the notice on the page, it is
likely that your <tt class="docutils literal"><span class="pre">app/config/parameters.ini</span></tt> file is not writable so you will need to
copy and paste the settings to the file located at <tt class="docutils literal"><span class="pre">app/config/parameters.ini</span></tt> (These
settings can replace the existing settings in this file).</p>

<div class="section" id="bundles-symfony2-building-blocks">
    <div class="section-header"><span class="title"><h2>Bundles: Symfony2 Building Blocks</h2></span></div>
<p>Bundles are the basic building block of any Symfony2 application, in fact the
Symfony2 framework is itself a bundle. Bundles allow us to separate
functionality to provide reusable units of code. They encapsulate the entire
needs to support the bundles purpose including the controllers, the model,
the templates, and the various resources such as images and CSS. We will create
a bundle for our website in the namespace Blogger. If you are not familiar with
namespaces in PHP you should spend some time reading up on them as they are
heavily used in Symfony2, everything is namespaced. See the
<a class="reference external" href="http://symfony.com/doc/current/cookbook/tools/autoloader.html">Symfony2 autoloader</a>
for specific details on how Symfony2 achieves autoloading.</p>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">A good understanding of namespaces can help eliminate common problems you may face
when folder structures do not correctly map to namespace structures.</p>
</div>
<div class="section" id="creating-the-bundle">
    <div class="section-header"><span class="title"><h3>Creating the bundle</h3></span></div>
<p>To encapsulate the functionality for the blog we will create a Blog bundle.
This will house all the required files and so could easily be dropped into another
Symfony2 application. Symfony2 provides a number of tasks to assist us when performing common
operations. One such task is the bundle generator.</p>
<p>To start the bundle generator run the following command. You will be presented
with a number of prompts that allow you to configure the way the bundle is setup.
The default for each prompt should be used.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>php app/console generate:bundle --namespace<span class="o">=</span>Blogger/BlogBundle --format<span class="o">=</span>yml
</pre></div>
</div>
<p>Upon completion of the generator Symfony2 will have constructed the basic bundle
layout. A few important changes need to be noted here.</p>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">You don&#8217;t have to use the generator tasks that Symfony2 provides, they are simply
there to assist you. You could have manually created the Bundle folder structure
and files. While it is not mandatory to use the generators, they do provide some benefits
such as they are quick to use and perform all tasks required to get the bundle
up and running. One such example is registering the bundle.</p>
</div>
<div class="section" id="registering-the-bundle">
    <div class="section-header"><span class="title"><h3>Registering the bundle</h3></span></div>
<p>Our new bundle <tt class="docutils literal"><span class="pre">BloggerBlogBundle</span></tt> has been registered in the Kernel located at
<tt class="docutils literal"><span class="pre">app/AppKernel.php</span></tt>. Symfony2 requires us to register all bundles that the application
needs to use. You will also notice that some bundles are only registered when in
the <tt class="docutils literal"><span class="pre">dev</span></tt> or <tt class="docutils literal"><span class="pre">test</span></tt> environments. Loading these bundles in the <tt class="docutils literal"><span class="pre">prod</span></tt>
(production) environment would introduce additional overhead for functionality
that wouldn&#8217;t be used. The snippet below shows how the <tt class="docutils literal"><span class="pre">BloggerBlogBundle</span></tt> has
been registered.</p>
<div class="highlight-php">
    <div class="highlight">
<pre>
<span class="c1">// app/AppKernel.php</span>
<span class="k">class</span> <span class="nc">AppKernel</span> <span class="k">extends</span> <span class="nx">Kernel</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">registerBundles</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="nv">$bundles</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
        <span class="c1">// ..</span>
            <span class="k">new</span> <span class="nx">Blogger\BlogBundle\BloggerBlogBundle</span><span class="p">(),</span>
        <span class="p">);</span>
        <span class="c1">// ..</span>

        <span class="k">return</span> <span class="nv">$bundles</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="c1">// ..</span>
<span class="p">}</span>
</pre>
    </div>
</div>
</div>
<div class="section" id="routing">
    <div class="section-header"><span class="title"><h2>Routing</h2></span></div>
<p>The bundle routing has been imported into the applications main
routing file located at <tt class="docutils literal"><span class="pre">app/config/routing.yml</span></tt>.</p>
<div class="highlight-yaml"><div class="highlight"><pre><span class="c1"># app/config/routing.yml</span>
<span class="l-Scalar-Plain">BloggerBlogBundle</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">resource</span><span class="p-Indicator">:</span> <span class="s">&quot;@BloggerBlogBundle/Resources/config/routing.yml&quot;</span>
    <span class="l-Scalar-Plain">prefix</span><span class="p-Indicator">:</span>   <span class="l-Scalar-Plain">/</span>
</pre></div>
</div>
<p>The prefix option allows us to mount the entire <tt class="docutils literal"><span class="pre">BloggerBlogBundle</span></tt> routing
with a prefix. In our case we have opted to mount at the default which is <tt class="docutils literal"><span class="pre">/</span></tt>.
If for example you would like all routes to be prefixed with <tt class="docutils literal"><span class="pre">/blogger</span></tt> change
the prefix to <tt class="docutils literal"><span class="pre">prefix:</span> <span class="pre">/blogger</span></tt>.</p>
</div>
<div class="section" id="default-structure">
    <div class="section-header"><span class="title"><h3>Default Structure</h3></span></div>
<p>Under the <tt class="docutils literal"><span class="pre">src</span></tt> directory the default bundle layout has been created. This
starts at the top level with the <tt class="docutils literal"><span class="pre">Blogger</span></tt> folder which maps directly to
the <tt class="docutils literal"><span class="pre">Blogger</span></tt> namespace we have created our bundle in. Under this we have the
<tt class="docutils literal"><span class="pre">BlogBundle</span></tt> folder which contains the actual bundle. The contents of this folder
will be examined as we work through the tutorial. If your familiar with MVC
frameworks, some of the folders will be self explanatory.</p>
</div>
</div>
<div class="section" id="the-default-controller">
    <div class="section-header"><span class="title"><h3>The Default Controller</h3></span></div>
<p>As part of the bundle generator, Symfony2 has created a default controller. We
can run this controller by going to
<tt class="docutils literal"><span class="pre">http://symblog.dev/app_dev.php/hello/symblog</span></tt>. You should see a simple
greeting page. Try changing the <tt class="docutils literal"><span class="pre">symblog</span></tt> part of the URL to your name.
We can examine at a high level how this page was generated.</p>
<div class="section" id="routed">
        <div class="section-header"><span class="title"><h3>Routed</h3></span></div>
<p>The <tt class="docutils literal"><span class="pre">BloggerBlogBundle</span></tt> routing file located at
<tt class="docutils literal"><span class="pre">src/Blogger/BlogBundle/Resources/config/routing.yml</span></tt> contains the following
routing rule.</p>
<div class="highlight-yaml"><div class="highlight"><pre><span class="c1"># src/Blogger/BlogBundle/Resources/config/routing.yml</span>
<span class="l-Scalar-Plain">BloggerBlogBundle_homepage</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">pattern</span><span class="p-Indicator">:</span>  <span class="l-Scalar-Plain">/hello/{name}</span>
    <span class="l-Scalar-Plain">defaults</span><span class="p-Indicator">:</span> <span class="p-Indicator">{</span> <span class="nv">_controller</span><span class="p-Indicator">:</span> <span class="nv">BloggerBlogBundle</span><span class="p-Indicator">:</span><span class="nv">Default</span><span class="p-Indicator">:</span><span class="nv">index</span> <span class="p-Indicator">}</span>
</pre></div>
</div>
<p>The routing is composed of a pattern and a some default options. The pattern is
checked against the URL, and the default options specify the controller to
execute if the route matches. In the pattern <tt class="docutils literal"><span class="pre">/hello/{name}</span></tt>, the <tt class="docutils literal"><span class="pre">{name}</span></tt>
placeholder will match any value as no specific requirements have been set. The
route also doesn&#8217;t specify any culture, format or HTTP methods. As no HTTP
methods have been set, requests from GET, POST, PUT, etc will all be eligible
for pattern matching.</p>
<p>If the route meets all the specified criteria it will be executed by the
_controller option in defaults. The _controller option specifies the
Logical Name of the controller which allows Symfony2 to map this to a specific file.
The above example will cause the <tt class="docutils literal"><span class="pre">index</span></tt> action in the <tt class="docutils literal"><span class="pre">Default</span></tt> controller
located at <tt class="docutils literal"><span class="pre">src/Blogger/BlogBundle/Controller/DefaultController.php</span></tt> to be executed.</p>
</div>
<div class="section" id="the-controller">
    <div class="section-header"><span class="title"><h2>The Controller</h2></span></div>
<p>The controller in this example is very simple. The <tt class="docutils literal"><span class="pre">DefaultController</span></tt> class
extends the <tt class="docutils literal"><span class="pre">Controller</span></tt> class which provides some helpful methods such as the <tt class="docutils literal"><span class="pre">render</span></tt>
method used below. As our route defines a placeholder it is passed into the
action as the argument <tt class="docutils literal"><span class="pre">$name</span></tt>. The action does nothing more than
call the <tt class="docutils literal"><span class="pre">render</span></tt> method specifying the <tt class="docutils literal"><span class="pre">index.html.twig</span></tt> template
in the <tt class="docutils literal"><span class="pre">BloggerBlogBundle</span></tt> Default view folder to be rendered. The
format of the template name is <tt class="docutils literal"><span class="pre">bundle:controller:template</span></tt>. In
our example this is <tt class="docutils literal"><span class="pre">BloggerBlogBundle:Default:index.html.twig</span></tt>
which maps to the <tt class="docutils literal"><span class="pre">index.html.twig</span></tt> template, in the <tt class="docutils literal"><span class="pre">Default</span></tt>
views folder of the <tt class="docutils literal"><span class="pre">BloggerBlogBundle</span></tt>, or physically to the file
<tt class="docutils literal"><span class="pre">src/Blogger/BlogBundle/Resources/views/Default/index.html.twig</span></tt>. Different
variations of the template format can be used to render templates
at different locations within the application and its bundles. We will see
this later in the chapter.</p>
<p>We also pass over the <tt class="docutils literal"><span class="pre">$name</span></tt> variable to the template via the <tt class="docutils literal"><span class="pre">array</span></tt>
options.</p>
<div class="highlight-php"><div class="highlight"><pre><span class="o">&lt;?</span><span class="nx">php</span>
<span class="c1">// src/Blogger/BlogBundle/Controller/DefaultController.php</span>

<span class="k">namespace</span> <span class="nx">Blogger\BlogBundle\Controller</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">Symfony\Bundle\FrameworkBundle\Controller\Controller</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">DefaultController</span> <span class="k">extends</span> <span class="nx">Controller</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">indexAction</span><span class="p">(</span><span class="nv">$name</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">render</span><span class="p">(</span><span class="s1">&#39;BloggerBlogBundle:Default:index.html.twig&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>
                <span class="s1">&#39;name&#39;</span> <span class="o">=&gt;</span> <span class="nv">$name</span>
        <span class="p">));</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="the-template-the-view">
    <div class="section-header"><span class="title"><h3>The Template (The View)</h3></span></div>
<p>As you can see the template is very simple. It prints out Hello followed
by the name argument passed over from the controller.</p>
<div class="highlight-html">
    <div class="highlight">
        {% set src = "{# src/Blogger/BlogBundle/Resources/views/Default/index.html.twig #}" %}
        {% set var = "{{ name }}" %}
        {% set open = "{{" %}
        {% set close = "}}" %}
        {% set d_open = "{%" %}
        {% set d_close = "%\}" %}
<pre>
{{ src }}

Hello {{ var }}!
</pre>
    </div>
</div>
</div>
</div>
<div class="section" id="cleaning-up">
    <div class="section-header"><span class="title"><h3>Cleaning up</h3></span></div>
<p>As we don&#8217;t need some of the default files created by the generator we can clean
these up.</p>
<p>The controller file <tt class="docutils literal"><span class="pre">src/Blogger/BlogBundle/Controller/DefaultController.php</span></tt>
can be deleted, along with the view folder and its content at
<tt class="docutils literal"><span class="pre">src/Blogger/BlogBundle/Resources/views/Default/</span></tt>. Finally remove the route
defined at <tt class="docutils literal"><span class="pre">src/Blogger/BlogBundle/Resources/config/routing.yml</span></tt></p>
</div>
</div>
<div class="section" id="templating">
    <div class="section-header"><span class="title"><h2>Templating</h2></span></div>
<p>We have 2 options by default when using Symfony2 for templating;
<a class="reference external" href="http://www.twig-project.org/">Twig</a> and PHP. You could of course use neither of
these and opt for a different library. This is possible thanks to Symfony2
<a class="reference external" href="http://symfony.com/doc/current/book/service_container.html">Dependency Injection Container</a>.
We will be using Twig as our templating engine for a number of reasons.</p>
<div class="tech-body">
    <ol class="arabic simple">
        <li>Twig is fast - Twig templates compile down to PHP classes so there is very little
        overhead to use Twig templates.</li>
        <li>Twig is concise - Twig allows us to perform templating functionality in very little
        code. Compare this to PHP where some statements become very verbose.</li>
        <li>Twig supports template inheritance - This is one of my personal favorites.
        Templates have the ability to extend and override other templates allowing children
        templates to change the defaults provided by their parents.</li>
        <li>Twig is secure - Twig has output escaping enabled by default and even provides a sand
        boxed environment for imported templates.</li>
        <li>Twig is extensible - Twig comes will a lot of common core functionality that
        you&#8217;d expected from a templating engine, but for those occasions where you need
        some extra bespoke functionality, Twig can be easily extended.</li>
    </ol>
</div>
<p>These are just some of the benefits of Twig. For more reasons why you should use
Twig see the official <a class="reference external" href="http://www.twig-project.org/">Twig</a> site.</p>
<div class="section" id="layout-structure">
    <div class="section-header"><span class="title"><h3>Layout Structure</h3></span></div>
<p>As Twig supports template inheritance, we are going to use the
<a class="reference external" href="http://symfony.com/doc/current/book/templating.html#three-level-inheritance">Three level inheritance</a>
approach. This approach allows us to modify the view at 3 distinct levels within the
application, giving us plenty of room for customisations.</p>
<div class="section" id="main-template-level-1">
    <div class="section-header"><span class="title"><h3>Main Template - Level 1</h3></span></div>
<p>Lets start by creating our basic block level template for symblog. We need 2
files here, the template and the CSS. As Symfony2 supports
<a class="reference external" href="http://diveintohtml5.org/">HTML5</a> we will also be using it.</p>

<div class="highlight-html"><pre>&lt;!-- app/Resources/views/base.html.twig --&gt;
&lt;!DOCTYPE html&gt;
&lt;html&gt;
    &lt;head&gt;
        &lt;meta http-equiv="Content-Type" content="text/html"; charset=utf-8" /&gt;
        &lt;title&gt;{{d_open}} block title {{d_close}}symblog{{d_open}} endblock {{d_close}} - symblog&lt;/title&gt;
        &lt;!--[if lt IE 9]&gt; &lt;script src="http://html5shim.googlecode.com/svn/trunk/html5.js"&gt;&lt;/script&gt; &lt;![endif]--&gt;
        {{d_open}} block stylesheets {{d_close}}
            &lt;link href='http://fonts.googleapis.com/css?family=Irish+Grover' rel='stylesheet' type='text/css'&gt;
            &lt;link href='http://fonts.googleapis.com/css?family=La+Belle+Aurore' rel='stylesheet' type='text/css'&gt;
            &lt;link href="{{open}} asset('css/screen.css') {{close}}" type="text/css" rel="stylesheet" /&gt;
        {{d_open}} endblock {{d_close}}
        &lt;link rel="shortcut icon" href="{{open}} asset('favicon.ico') {{close}}" /&gt;
    &lt;/head&gt;
    &lt;body&gt;

        &lt;section id="wrapper"&gt;
            &lt;header id="header"&gt;
                &lt;div class="top"&gt;
                    {{d_open}} block navigation {{d_close}}
                        &lt;nav&gt;
                            &lt;ul class="navigation"&gt;
                                &lt;li&gt;&lt;a href="#"&gt;Home&lt;/a&gt;&lt;/li&gt;
                                &lt;li&gt;&lt;a href="#"&gt;About&lt;/a&gt;&lt;/li&gt;
                                &lt;li&gt;&lt;a href="#"&gt;Contact&lt;/a&gt;&lt;/li&gt;
                            &lt;/ul&gt;
                        &lt;/nav&gt;
                    {{d_open}} endblock {{d_close}}
                &lt;/div&gt;

                &lt;hgroup&gt;
                    &lt;h2&gt;
                        {{d_open}} block blog_title {{d_close}}
                            &lt;a href="#"&gt;symblog&lt;/a&gt;
                        {{d_open}} endblock {{d_close}}
                    &lt;/h2&gt;
                    &lt;h3&gt;
                        {{d_open}} block blog_tagline {{d_close}}
                            &lt;a href="#"&gt;creating a blog in Symfony2&lt;/a&gt;
                        {{d_open}} endblock {{d_close}}
                    &lt;/h3&gt;
                &lt;/hgroup&gt;
            &lt;/header&gt;

            &lt;section class="main-col"&gt;
                {{d_open}} block body {{d_close}}{{d_open}} endblock {{d_close}}
            &lt;/section&gt;
            &lt;aside class="sidebar"&gt;
                {{d_open}} block sidebar {{d_close}}{{d_open}} endblock {{d_close}}
            &lt;/aside&gt;

            &lt;div id="footer"&gt;
                {{d_open}} block footer {{d_close}}
                    Symfony2 blog tutorial - created by 
                        &lt;a href="https://github.com/dsyph3r"&gt;dsyph3r&lt;/a&gt;
                {{d_open}} endblock {{d_close}}
            &lt;/div&gt;
        &lt;/section&gt;

        {{d_open}} block javascripts {{d_close}}{{d_open}} endblock {{d_close}}
    &lt;/body&gt;
&lt;/html&gt;</pre>
</div>

<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">There are 3 external files pulled into the template, 1 JavaScript and 2 CSS.
The JavaScript file fixes the lack of HTML5 support in IE browsers pre version
9. The 2 CSS files import fonts from
<a class="reference external" href="http://www.google.com/webfonts">Google Web font</a>.</p>
</div>
    
<p>This template marks up the main structure of our blogging website. Most
of the template consists of HTML, with the odd Twig directive. Its these
Twig directives that we will examine now.</p>
<p>We will start by focusing on the document HEAD. Lets look at the title:</p>
<div class="highlight-html"><div class="highlight"><pre><span class="nt">&lt;title&gt;</span>{{d_open}} block title {{d_close}}symblog{{d_open}} endblock {{d_close}} - symblog<span class="nt">&lt;/title&gt;</span>
</pre></div>
</div>


<p>The first thing you&#8217;ll notice is the alien <tt class="docutils literal"><span class="pre">{{d_open}}</span></tt> tag. Its not HTML, and its
definitely not PHP. This is one of the 3 Twig tags. This tag is the Twig
<tt class="docutils literal"><span class="pre">Do</span> <span class="pre">something</span></tt> tag. It is used to execute statements such as control statements and
for defining block elements. A full list of
<a class="reference external" href="http://www.twig-project.org/doc/templates.html#list-of-control-structures">control structures</a>
can be found in the Twig Documentation. The Twig block we have defined in the
title does 2 things; It sets the block identifier to title, and provides a
default output between the block and endblock directives. By defining a block we
can take advantage of Twig&#8217;s inheritance model. For example, on a page to
display a blog post we would want the page title to reflect the title of the
blog. We can achieve this by extending the template and overriding the title block.</p>

<div class="highlight-html"><div class="highlight"><pre>{{d_open}} extends &#39;::base.html.twig&#39; {{d_close}}

{{d_open}} block title {{d_close}}The blog title goes here{{d_open}} endblock {{d_close}}

</pre></div>
</div>

<p>In the above example we have extended the applications base template that first
defined the title block. You&#8217;ll notice the template format used with the
<tt class="docutils literal"><span class="pre">extends</span></tt> directive is missing the <tt class="docutils literal"><span class="pre">Bundle</span></tt> and the <tt class="docutils literal"><span class="pre">Controller</span></tt> parts,
remember the template format is <tt class="docutils literal"><span class="pre">bundle:controller:template</span></tt>. By excluding the
<tt class="docutils literal"><span class="pre">Bundle</span></tt> and the <tt class="docutils literal"><span class="pre">Controller</span></tt> parts we are specifiying the use of the application
level templates defined at <tt class="docutils literal"><span class="pre">app/Resources/views/</span></tt>.</p>
<p>Next we have defined another title block and put in some
content, in this case the blog title. As the parent template already
contains a title block, it is overridden by our new one. The title would now
output as &#8216;The blog title goes here - symblog&#8217;. This functionality provided by
Twig will be used extensively when creating templates.</p>
<p>In the stylesheets block we are introduced to the next Twig tag, the <tt class="docutils literal"><span class="pre">&#123;&#123;</span></tt> tag,
or the <tt class="docutils literal"><span class="pre">Say</span> <span class="pre">something</span></tt> tag.</p>
<div class="highlight-html"><div class="highlight"><pre><span class="nt">&lt;link</span> <span class="na">href=</span><span class="s">&quot; &#123;&#123; asset(&#39;css/screen.css&#39;) &#125;&#125; &quot;</span> <span class="na">type=</span><span class="s">&quot;text/css&quot;</span> <span class="na">rel=</span><span class="s">&quot;stylesheet&quot;</span> <span class="nt">/&gt;</span>
</pre></div>
</div>
<p>This tag is used to print the value of variable or expression. In the above example
it prints out the return value of the <tt class="docutils literal"><span class="pre">asset</span></tt> function, which provides us with
a portable way to link to the application assets, such as CSS, JavaScript, and images.</p>
<p>The <tt class="docutils literal"><span class="pre">&#123;&#123;</span></tt> tag can also be combined with filters to manipulate the output before
printing.</p>
<div class="highlight-html"><div class="highlight"><pre>&#123;&#123; blog.created|date(&quot;d-m-Y&quot;) &#125;&#125; 
</pre></div>
</div>
<p>For a full list of filters check the
<a class="reference external" href="http://www.twig-project.org/doc/templates.html#list-of-built-in-filters">Twig Documentation</a>.</p>
<p>The last Twig tag, which we have not seen in the templates is the comment tag <tt class="docutils literal"><span class="pre">&#123;&#35;</span></tt>.
Its usage is as follows:</p>
<div class="highlight-html"><div class="highlight"><pre>&#123;&#35; The quick brown fox jumps over the lazy dog &#35;&#125; 
</pre></div>
</div>
<p>No other concepts are introduced in this template. It provides the main
layout ready for us to customise it as we need.</p>
<p>Next lets add some styles. Create a stylesheet at <tt class="docutils literal"><span class="pre">web/css/screen.css</span></tt> and add
the following content. This will add styles for the main template.</p>
       
<div class="highlight-css"><div class="highlight"><pre><span class="nt" >html</span><span class="o">,</span><span class="nt">body</span><span class="o">,</span><span class="nt">div</span><span class="o">,</span><span class="nt">span</span><span class="o">,</span><span class="nt">applet</span><span class="o">,</span><span class="nt">object</span><span class="o">,</span><span class="nt">iframe</span><span class="o">,</span><span class="nt">h1</span><span class="o">,</span><span class="nt">h2</span><span class="o">,</span><span class="nt">h3</span><span class="o">,</span><span class="nt">h4</span><span class="o">,</span><span class="nt">h5</span><span class="o">,</span><span class="nt">h6</span><span class="o">,</span><span class="nt">p</span><span class="o">,</span><span class="nt">blockquote</span><span class="o">,</span><span class="nt">pre</span><span class="o">,</span><span class="nt">a</span><span class="o">,</span><span class="nt">abbr</span><span class="o">,</span><span class="nt">acronym</span><span class="o">,</span><span class="nt">address</span><span class="o">,</span><span class="nt">big</span><span class="o">,</span><span class="nt">cite</span><span class="o">,</span><span class="nt">code</span><span class="o">,</span><span class="nt">del</span><span class="o">,</span><span class="nt">dfn</span><span class="o">,</span><span class="nt">em</span><span class="o">,</span><span class="nt">img</span><span class="o">,</span><span class="nt">ins</span><span class="o">,</span><span class="nt">kbd</span><span class="o">,</span><span class="nt">q</span><span class="o">,</span><span class="nt">s</span><span class="o">,</span><span class="nt">samp</span><span class="o">,</span><span class="nt">small</span><span class="o">,</span><span class="nt">strike</span><span class="o">,</span><span class="nt">strong</span><span class="o">,</span><span class="nt">sub</span><span class="o">,</span><span class="nt">sup</span><span class="o">,</span><span class="nt">tt</span><span class="o">,</span><span class="nt">var</span><span class="o">,</span><span class="nt">b</span><span class="o">,</span><span class="nt">u</span><span class="o">,</span><span class="nt">i</span><span class="o">,</span><span class="nt">center</span><span class="o">,</span><span class="nt">dl</span><span class="o">,</span><span class="nt">dt</span><span class="o">,</span><span class="nt">dd</span><span class="o">,</span><span class="nt">ol</span><span class="o">,</span><span class="nt">ul</span><span class="o">,</span><span class="nt">li</span><span class="o">,</span><span class="nt">fieldset</span><span class="o">,</span><span class="nt">form</span><span class="o">,</span><span class="nt">label</span><span class="o">,</span><span class="nt">legend</span><span class="o">,</span><span class="nt">table</span><span class="o">,</span><span class="nt">caption</span><span class="o">,</span><span class="nt">tbody</span><span class="o">,</span><span class="nt">tfoot</span><span class="o">,</span><span class="nt">thead</span><span class="o">,</span><span class="nt">tr</span><span class="o">,</span><span class="nt">th</span><span class="o">,</span><span class="nt">td</span><span class="o">,</span><span class="nt">article</span><span class="o">,</span><span class="nt">aside</span><span class="o">,</span><span class="nt">canvas</span><span class="o">,</span><span class="nt">details</span><span class="o">,</span><span class="nt">embed</span><span class="o">,</span><span class="nt">figure</span><span class="o">,</span><span class="nt">figcaption</span><span class="o">,</span><span class="nt">footer</span><span class="o">,</span><span class="nt">header</span><span class="o">,</span><span class="nt">hgroup</span><span class="o">,</span><span class="nt">menu</span><span class="o">,</span><span class="nt">nav</span><span class="o">,</span><span class="nt">output</span><span class="o">,</span><span class="nt">ruby</span><span class="o">,</span><span class="nt">section</span><span class="o">,</span><span class="nt">summary</span><span class="o">,</span><span class="nt">time</span><span class="o">,</span><span class="nt">mark</span><span class="o">,</span><span class="nt">audio</span><span class="o">,</span><span class="nt">video</span><span class="p">{</span><span class="k">border</span><span class="o">:</span><span class="m">0</span><span class="p">;</span><span class="k">font-size</span><span class="o">:</span><span class="m">100</span><span class="o">%</span><span class="p">;</span><span class="k">font</span><span class="o">:</span><span class="k">inherit</span><span class="p">;</span><span class="k">vertical-align</span><span class="o">:</span><span class="k">baseline</span><span class="p">;</span><span class="k">margin</span><span class="o">:</span><span class="m">0</span><span class="p">;</span><span class="k">padding</span><span class="o">:</span><span class="m">0</span><span class="p">}</span><span class="nt">article</span><span class="o">,</span><span class="nt">aside</span><span class="o">,</span><span class="nt">details</span><span class="o">,</span><span class="nt">figcaption</span><span class="o">,</span><span class="nt">figure</span><span class="o">,</span><span class="nt">footer</span><span class="o">,</span><span class="nt">header</span><span class="o">,</span><span class="nt">hgroup</span><span class="o">,</span><span class="nt">menu</span><span class="o">,</span><span class="nt">nav</span><span class="o">,</span><span class="nt">section</span><span class="p">{</span><span class="k">display</span><span class="o">:</span><span class="k">block</span><span class="p">}</span><span class="nt">body</span><span class="p">{</span><span class="k">line-height</span><span class="o">:</span><span class="m">1</span><span class="p">}</span><span class="nt">ol</span><span class="o">,</span><span class="nt">ul</span><span class="p">{</span><span class="k">list-style</span><span class="o">:</span><span class="k">none</span><span class="p">}</span><span class="nt">blockquote</span><span class="o">,</span><span class="nt">q</span><span class="p">{</span><span class="k">quotes</span><span class="o">:</span><span class="k">none</span><span class="p">}</span><span class="nt">blockquote</span><span class="nd">:before</span><span class="o">,</span><span class="nt">blockquote</span><span class="nd">:after</span><span class="o">,</span><span class="nt">q</span><span class="nd">:before</span><span class="o">,</span><span class="nt">q</span><span class="nd">:after</span><span class="p">{</span><span class="k">content</span><span class="o">:</span><span class="k">none</span><span class="p">}</span><span class="nt">table</span><span class="p">{</span><span class="k">border-collapse</span><span class="o">:</span><span class="k">collapse</span><span class="p">;</span><span class="k">border-spacing</span><span class="o">:</span><span class="m">0</span><span class="p">}</span>
<span class="nt">body</span> <span class="p">{</span> <span class="k">line-height</span><span class="o">:</span> <span class="m">1</span><span class="p">;</span><span class="k">font-family</span><span class="o">:</span> <span class="n">Arial</span><span class="o">,</span> <span class="n">Helvetica</span><span class="o">,</span> <span class="k">sans-serif</span><span class="p">;</span><span class="k">font-size</span><span class="o">:</span> <span class="m">12px</span><span class="p">;</span> <span class="k">width</span><span class="o">:</span> <span class="m">100</span><span class="o">%</span><span class="p">;</span> <span class="k">height</span><span class="o">:</span> <span class="m">100</span><span class="o">%</span><span class="p">;</span> <span class="k">color</span><span class="o">:</span> <span class="m">#000</span><span class="p">;</span> <span class="k">font-size</span><span class="o">:</span> <span class="m">14px</span><span class="p">;</span> <span class="p">}</span>
<span class="nc">.clear</span> <span class="p">{</span> <span class="k">clear</span><span class="o">:</span> <span class="k">both</span><span class="p">;</span> <span class="p">}</span>

<span class="nf">#wrapper</span> <span class="p">{</span> <span class="k">margin</span><span class="o">:</span> <span class="m">10px</span> <span class="k">auto</span><span class="p">;</span> <span class="k">width</span><span class="o">:</span> <span class="m">1000px</span><span class="p">;</span> <span class="p">}</span>
<span class="nf">#wrapper</span> <span class="nt">a</span> <span class="p">{</span> <span class="k">text-decoration</span><span class="o">:</span> <span class="k">none</span><span class="p">;</span> <span class="k">color</span><span class="o">:</span> <span class="m">#F48A00</span><span class="p">;</span> <span class="p">}</span>
<span class="nf">#wrapper</span> <span class="nt">span</span><span class="nc">.highlight</span> <span class="p">{</span> <span class="k">color</span><span class="o">:</span> <span class="m">#F48A00</span><span class="p">;</span> <span class="p">}</span>

<span class="nf">#header</span> <span class="p">{</span> <span class="k">border-bottom</span><span class="o">:</span> <span class="m">1px</span> <span class="k">solid</span> <span class="m">#ccc</span><span class="p">;</span> <span class="k">margin-bottom</span><span class="o">:</span> <span class="m">20px</span><span class="p">;</span> <span class="p">}</span>
<span class="nf">#header</span> <span class="nc">.top</span> <span class="p">{</span> <span class="k">border-bottom</span><span class="o">:</span> <span class="m">1px</span> <span class="k">solid</span> <span class="m">#ccc</span><span class="p">;</span> <span class="k">margin-bottom</span><span class="o">:</span> <span class="m">10px</span><span class="p">;</span> <span class="p">}</span>
<span class="nf">#header</span> <span class="nt">ul</span><span class="nc">.navigation</span> <span class="p">{</span> <span class="k">list-style</span><span class="o">:</span> <span class="k">none</span><span class="p">;</span> <span class="k">text-align</span><span class="o">:</span> <span class="k">right</span><span class="p">;</span> <span class="p">}</span>
<span class="nf">#header</span> <span class="nc">.navigation</span> <span class="nt">li</span> <span class="p">{</span> <span class="k">display</span><span class="o">:</span> <span class="k">inline</span> <span class="p">}</span>
<span class="nf">#header</span> <span class="nc">.navigation</span> <span class="nt">li</span> <span class="nt">a</span> <span class="p">{</span> <span class="k">display</span><span class="o">:</span> <span class="k">inline</span><span class="o">-</span><span class="k">block</span><span class="p">;</span> <span class="k">padding</span><span class="o">:</span> <span class="m">10px</span> <span class="m">15px</span><span class="p">;</span> <span class="k">border-left</span><span class="o">:</span> <span class="m">1px</span> <span class="k">solid</span> <span class="m">#ccc</span><span class="p">;</span> <span class="p">}</span>
<span class="nf">#header</span> <span class="nt">h2</span> <span class="p">{</span> <span class="k">font-family</span><span class="o">:</span> <span class="s1">&#39;Irish Grover&#39;</span><span class="o">,</span> <span class="k">cursive</span><span class="p">;</span> <span class="k">font-size</span><span class="o">:</span> <span class="m">92px</span><span class="p">;</span> <span class="k">text-align</span><span class="o">:</span> <span class="k">center</span><span class="p">;</span> <span class="k">line-height</span><span class="o">:</span> <span class="m">110px</span><span class="p">;</span> <span class="p">}</span>
<span class="nf">#header</span> <span class="nt">h2</span> <span class="nt">a</span> <span class="p">{</span> <span class="k">color</span><span class="o">:</span> <span class="m">#000</span><span class="p">;</span> <span class="p">}</span>
<span class="nf">#header</span> <span class="nt">h3</span> <span class="p">{</span> <span class="k">text-align</span><span class="o">:</span> <span class="k">center</span><span class="p">;</span> <span class="k">font-family</span><span class="o">:</span> <span class="s1">&#39;La Belle Aurore&#39;</span><span class="o">,</span> <span class="k">cursive</span><span class="p">;</span> <span class="k">font-size</span><span class="o">:</span> <span class="m">24px</span><span class="p">;</span> <span class="k">margin-bottom</span><span class="o">:</span> <span class="m">20px</span><span class="p">;</span> <span class="k">font-weight</span><span class="o">:</span> <span class="k">normal</span><span class="p">;</span> <span class="p">}</span>

<span class="nc">.main-col</span> <span class="p">{</span> <span class="k">width</span><span class="o">:</span> <span class="m">700px</span><span class="p">;</span> <span class="k">display</span><span class="o">:</span> <span class="k">inline</span><span class="o">-</span><span class="k">block</span><span class="p">;</span> <span class="k">float</span><span class="o">:</span> <span class="k">left</span><span class="p">;</span> <span class="k">border-right</span><span class="o">:</span> <span class="m">1px</span> <span class="k">solid</span> <span class="m">#ccc</span><span class="p">;</span> <span class="k">padding</span><span class="o">:</span> <span class="m">20px</span><span class="p">;</span> <span class="k">margin-bottom</span><span class="o">:</span> <span class="m">20px</span><span class="p">;</span> <span class="p">}</span>
<span class="nc">.sidebar</span> <span class="p">{</span> <span class="k">width</span><span class="o">:</span> <span class="m">239px</span><span class="p">;</span> <span class="k">padding</span><span class="o">:</span> <span class="m">10px</span><span class="p">;</span> <span class="k">display</span><span class="o">:</span> <span class="k">inline</span><span class="o">-</span><span class="k">block</span><span class="p">;</span> <span class="p">}</span>

<span class="nc">.main-col</span> <span class="nt">a</span> <span class="p">{</span> <span class="k">color</span><span class="o">:</span> <span class="m">#F48A00</span><span class="p">;</span> <span class="p">}</span>
<span class="nc">.main-col</span> <span class="nt">h1</span><span class="o">,</span>
<span class="nc">.main-col</span> <span class="nt">h2</span>
    <span class="p">{</span> <span class="k">line-height</span><span class="o">:</span> <span class="m">1.2em</span><span class="p">;</span> <span class="k">font-size</span><span class="o">:</span> <span class="m">32px</span><span class="p">;</span> <span class="k">margin-bottom</span><span class="o">:</span> <span class="m">10px</span><span class="p">;</span> <span class="k">font-weight</span><span class="o">:</span> <span class="k">normal</span><span class="p">;</span> <span class="k">color</span><span class="o">:</span> <span class="m">#F48A00</span><span class="p">;</span> <span class="p">}</span>
<span class="nc">.main-col</span> <span class="nt">p</span> <span class="p">{</span> <span class="k">line-height</span><span class="o">:</span> <span class="m">1.5em</span><span class="p">;</span> <span class="k">margin-bottom</span><span class="o">:</span> <span class="m">20px</span><span class="p">;</span> <span class="p">}</span>

<span class="nf">#footer</span> <span class="p">{</span> <span class="k">border-top</span><span class="o">:</span> <span class="m">1px</span> <span class="k">solid</span> <span class="m">#ccc</span><span class="p">;</span> <span class="k">clear</span><span class="o">:</span> <span class="k">both</span><span class="p">;</span> <span class="k">text-align</span><span class="o">:</span> <span class="k">center</span><span class="p">;</span> <span class="k">padding</span><span class="o">:</span> <span class="m">10px</span><span class="p">;</span> <span class="k">color</span><span class="o">:</span> <span class="m">#aaa</span><span class="p">;</span> <span class="p">}</span>
</pre></div>
</div>
</div>

<div class="section" id="bundle-template-level-2">
<div class="section-header"><span class="title"><h3>Bundle Template - Level 2</h3></span></div>
<p>We now move onto creating the layout for the Blog bundle. Create a file located at
<tt class="docutils literal"><span class="pre">src/Blogger/BlogBundle/Resources/views/layout.html.twig</span></tt> and add the
following content.</p>
<div class="highlight-html"><div class="highlight"><pre>&#123;&#35; src/Blogger/BlogBundle/Resources/views/layout.html.twig &#35;&#125; 
&#123;&#37; extends &#39;::base.html.twig&#39; &#37;&#125;

&#123;&#37; block sidebar &#37;&#125;
    Sidebar content
&#123;&#37; endblock &#37;&#125;
</pre></div>
</div>

<p>At a first glance this template may seem a little simple, but its simplicity is
the key. Firstly it extends the applications base template that we created earlier.
Secondly it overrides the parent sidebar block with some dummy content. As the
sidebar will be present on all pages of our blog it makes sense to perform the
customisation at this level. You may ask why don&#8217;t we just put the customisation
in the application template as it will be present on all pages. This is simple,
the application knows nothing about the Bundle and shouldn&#8217;t. The Bundle should
self contain all its functionality and rendering the sidebar is part of this
functionality. OK, so why don&#8217;t we just place the sidebar in each of the page
templates? Again this is simple, we would have to duplicate the sidebar each
time we added a page. Further this level 2 template gives us the flexibility in
the future to add other customisations that all children templates will inherit.
For example, we may want to change the footer copy on all pages, this would be a
great place to do this.</p>
</div>
<div class="section" id="page-template-level-3">
<div class="section-header"><span class="title"><h3>Page Template - Level 3</h3></span></div>    
<p>Finally we are ready for the controller layout. These layouts will commonly be
related to a controller action, i.e., the blog show action will have a
blog show template.</p>
<p>Lets start by creating the controller for the homepage and its template. As this
is the first page we are creating we need to create the controller. Create the
controller at <tt class="docutils literal"><span class="pre">src/Blogger/BlogBundle/Controller/PageController.php</span></tt> and add
the following:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="o">&lt;?</span><span class="nx">php</span>
<span class="c1">// src/Blogger/BlogBundle/Controller/PageController.php</span>

<span class="k">namespace</span> <span class="nx">Blogger\BlogBundle\Controller</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">Symfony\Bundle\FrameworkBundle\Controller\Controller</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">PageController</span> <span class="k">extends</span> <span class="nx">Controller</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">indexAction</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">render</span><span class="p">(</span><span class="s1">&#39;BloggerBlogBundle:Page:index.html.twig&#39;</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Now create the template for this action. As you can see in the controller action
we are going to render the Page index template. Create the template at
<tt class="docutils literal"><span class="pre">src/Blogger/BlogBundle/Resources/views/Page/index.html.twig</span></tt></p>
<div class="highlight-html"><div class="highlight"><pre>&#123;&#35; src/Blogger/BlogBundle/Resources/views/Page/index.html.twig &#35;&#125; 
&#123;&#37; extends &#39;BloggerBlogBundle::layout.html.twig&#39; &#37;&#125;

&#123;&#37; block body &#37;&#125;
    Blog homepage
&#123;&#37; endblock &#37;&#125;
</pre></div>
</div>
<p>This introduces the final template format we can specify. In this example
the template <tt class="docutils literal"><span class="pre">BloggerBlogBundle::layout.html.twig</span></tt> is extended where
the <tt class="docutils literal"><span class="pre">Controller</span></tt> part of the template name is ommitted. By excluding the
<tt class="docutils literal"><span class="pre">Controller</span></tt> part we are specifiying the use of the Bundle level template
created at <tt class="docutils literal"><span class="pre">src/Blogger/BlogBundle/Resources/views/layout.html.twig</span></tt>.</p>
<p>Now lets add a route for our homepage. Update the Bundle routing config located
at <tt class="docutils literal"><span class="pre">src/Blogger/BlogBundle/Resources/config/routing.yml</span></tt>.</p>
<div class="highlight-yaml"><div class="highlight"><pre><span class="c1"># src/Blogger/BlogBundle/Resources/config/routing.yml</span>
<span class="l-Scalar-Plain">BloggerBlogBundle_homepage</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">pattern</span><span class="p-Indicator">:</span>  <span class="l-Scalar-Plain">/</span>
    <span class="l-Scalar-Plain">defaults</span><span class="p-Indicator">:</span> <span class="p-Indicator">{</span> <span class="nv">_controller</span><span class="p-Indicator">:</span> <span class="nv">BloggerBlogBundle</span><span class="p-Indicator">:</span><span class="nv">Page</span><span class="p-Indicator">:</span><span class="nv">index</span> <span class="p-Indicator">}</span>
    <span class="l-Scalar-Plain">requirements</span><span class="p-Indicator">:</span>
        <span class="l-Scalar-Plain">_method</span><span class="p-Indicator">:</span>  <span class="l-Scalar-Plain">GET</span>
</pre></div>
</div>
<p>Lastly we need to remove the default route for the Symfony2 welcome screen.
Remove the <tt class="docutils literal"><span class="pre">_welcome</span></tt> route at the top of the <tt class="docutils literal"><span class="pre">dev</span></tt> routing file located at
<tt class="docutils literal"><span class="pre">app/config/routing_dev.yml</span></tt>.</p>
<p>We are now ready to view our blogger template. Point your browser to
<tt class="docutils literal"><span class="pre">http://symblog.dev/app_dev.php/</span></tt>.</p>
<img alt="symblog main template layout" class="align-center" src="{{asset("bundles/ppgw/images/symblog_screenshots/homepage.jpg")}}" width="725"/>
<p>You should see the basic layout of the blog, with
the main content and sidebar reflecting the blocks we have overridden in the relevant
templates.</p>
</div>
</div>
</div>
      
<div class="section" id="the-about-page">
<div class="section-header"><span class="title"><h3>The About Page</h3></span></div>
<p>The final task in this part of the tutorial will be creating a static page for the
about page. This will demonstrate how to link pages together, and further enforce the
Three Level Inheritance approach we have adopted.</p>
<div class="section" id="the-route">
<div class="section-header"><span class="title"><h3>The Route</h3></span></div>   
<p>When creating a new page, one of the first tasks should be creating the route for it.
Open up the <tt class="docutils literal"><span class="pre">BloggerBlogBundle</span></tt> routing file located at
<tt class="docutils literal"><span class="pre">src/Blogger/BlogBundle/Resources/config/routing.yml</span></tt> and append the following routing
rule.</p>
<div class="highlight-yaml"><div class="highlight"><pre><span class="c1"># src/Blogger/BlogBundle/Resources/config/routing.yml</span>
<span class="l-Scalar-Plain">BloggerBlogBundle_about</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">pattern</span><span class="p-Indicator">:</span>  <span class="l-Scalar-Plain">/about</span>
    <span class="l-Scalar-Plain">defaults</span><span class="p-Indicator">:</span> <span class="p-Indicator">{</span> <span class="nv">_controller</span><span class="p-Indicator">:</span> <span class="nv">BloggerBlogBundle</span><span class="p-Indicator">:</span><span class="nv">Page</span><span class="p-Indicator">:</span><span class="nv">about</span> <span class="p-Indicator">}</span>
    <span class="l-Scalar-Plain">requirements</span><span class="p-Indicator">:</span>
        <span class="l-Scalar-Plain">_method</span><span class="p-Indicator">:</span>  <span class="l-Scalar-Plain">GET</span>
</pre></div>
</div>
</div>
<div class="section" id="id2">
<div class="section-header"><span class="title"><h3>The Controller</h3></span></div>   
<p>Next open the <tt class="docutils literal"><span class="pre">Page</span></tt> controller located at
<tt class="docutils literal"><span class="pre">src/Blogger/BlogBundle/Controller/PageController.php</span></tt> and add the action
to handle the about page.</p>
<div class="highlight-php"><div class="highlight"><pre><span class="c1">// src/Blogger/BlogBundle/Controller/PageController.php</span>
<span class="k">class</span> <span class="nc">PageController</span> <span class="k">extends</span> <span class="nx">Controller</span>
<span class="p">{</span>
    <span class="c1">//  ..</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">aboutAction</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">render</span><span class="p">(</span><span class="s1">&#39;BloggerBlogBundle:Page:about.html.twig&#39;</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="the-view">
<div class="section-header"><span class="title"><h3>The View</h3></span></div>   
<p>For the view, create a new file located at
<tt class="docutils literal"><span class="pre">src/Blogger/BlogBundle/Resources/views/Page/about.html.twig</span></tt> and copy in the
following content.</p>
<div class="highlight-html"><div class="highlight"><pre>&#123;&#35; src/Blogger/BlogBundle/Resources/views/Page/about.html.twig &#35;&#125;
&#123;&#37; extends &#39;BloggerBlogBundle::layout.html.twig&#39; &#37;&#125;

&#123;&#37; block title &#37;&#125;About&#123;&#37; endblock &#37;&#125;

&#123;&#37; block body &#37;&#125;
    <span class="nt">&lt;header&gt;</span>
        <span class="nt">&lt;h1&gt;</span>About symblog<span class="nt">&lt;/h1&gt;</span>
    <span class="nt">&lt;/header&gt;</span>
    <span class="nt">&lt;article&gt;</span>
        <span class="nt">&lt;p&gt;</span>Donec imperdiet ante sed diam consequat et dictum erat faucibus. Aliquam sit
        amet vehicula leo. Morbi urna dui, tempor ac posuere et, rutrum at dui.
        Curabitur neque quam, ultricies ut imperdiet id, ornare varius arcu. Ut congue
        urna sit amet tellus malesuada nec elementum risus molestie. Donec gravida
        tellus sed tortor adipiscing fringilla. Donec nulla mauris, mollis egestas
        condimentum laoreet, lacinia vel lorem. Morbi vitae justo sit amet felis
        vehicula commodo a placerat lacus. Mauris at est elit, nec vehicula urna. Duis a
        lacus nisl. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices
        posuere cubilia Curae.<span class="nt">&lt;/p&gt;</span>
    <span class="nt">&lt;/article&gt;</span>
&#123;&#37; endblock &#37;&#125; 
</pre></div>
</div>
<p>The about page is nothing spectacular. Its only action is to render a template file
with some dummy content. It does however bring us on to the next task.</p>
</div>
<div class="section" id="linking-the-pages">
<div class="section-header"><span class="title"><h3>Linking the Pages</h3></span></div>   
<p>We now have the about page ready to go. Have a look at <tt class="docutils literal"><span class="pre">http://symblog.dev/app_dev.php/about</span></tt>
to see this. As it stands there is no way for a user of your blog to view the about page,
short of typing in the full URL just like we did. As you&#8217;d expect Symfony2 provides both
sides to the routing equation. It can match routes as we have seen, and can also
generate URLs from these routes. You should always use the routing functions provided
by Symfony2. Never in your application should you be tempted to put the following.</p>
<div class="highlight-html+php"><div class="highlight"><pre><span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;/contact&quot;</span><span class="nt">&gt;</span>Contact<span class="nt">&lt;/a&gt;</span>

<span class="cp">&lt;?php</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">redirect</span><span class="p">(</span><span class="s2">&quot;/contact&quot;</span><span class="p">);</span> <span class="cp">?&gt;</span>
</pre></div>
</div>
<p>You may be wondering what&#8217;s wrong with this approach, it may be the way you always
link your pages together. However, there are a number of problems with this approach.</p>
<div class='tech-body'>
<ol class="arabic simple">
<li>It uses a hard link and ignores the Symfony2 routing system entirely. If you wanted to change
the location of the contact page at any point you would have to find all references to the hard
link and change them.</li>
<li>It will ignore your environment controllers. Environments is something we haven&#8217;t really explained yet
but you have been using them. The <tt class="docutils literal"><span class="pre">app_dev.php</span></tt> front controller provides us access to our application
in the <tt class="docutils literal"><span class="pre">dev</span></tt> environment. If you were to replace the <tt class="docutils literal"><span class="pre">app_dev.php</span></tt> with <tt class="docutils literal"><span class="pre">app.php</span></tt> you will be
running the application in the <tt class="docutils literal"><span class="pre">prod</span></tt> environment. The significance of these environments will
be explained further in the tutorial but for now it&#8217;s important to note that the hard link
defined above does not maintain the current environment we are in as the front controller is
not prepended to the URL.</li>
</ol></div>
<p>The correct way to link pages together is with the <tt class="docutils literal"><span class="pre">path</span></tt> and <tt class="docutils literal"><span class="pre">url</span></tt> methods provided by Twig. They are
both very similar, except the <tt class="docutils literal"><span class="pre">url</span></tt> method will provide us with absolute URLs. Lets
update the main application template located at <tt class="docutils literal"><span class="pre">app/Resources/views/base.html.twig</span></tt> to link
to the about page and homepage together.</p>
<div class="highlight-html"><div class="highlight"><pre><span class="c">&lt;!-- app/Resources/views/base.html.twig --&gt;</span>
&#123;&#37; block navigation &#37;&#125; 
    <span class="nt">&lt;nav&gt;</span>
        <span class="nt">&lt;ul</span> <span class="na">class=</span><span class="s">&quot;navigation&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">&quot;&#123;&#123; path(&#39;BloggerBlogBundle_homepage&#39;) &#125;&#125; &quot;</span><span class="nt">&gt;</span>Home<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
            <span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">&quot;&#123;&#123; path(&#39;BloggerBlogBundle_about&#39;) &#125;&#125; &quot;</span><span class="nt">&gt;</span>About<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
            <span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">&quot;#&quot;</span><span class="nt">&gt;</span>Contact<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
        <span class="nt">&lt;/ul&gt;</span>
    <span class="nt">&lt;/nav&gt;</span>
&#123;&#37; endblock &#37;&#125; 
</pre></div>
</div>
<p>Now refresh your browser to see the Home and About page links working as expected. If you view the source
for the pages you will notice the link has been prefixed with <tt class="docutils literal"><span class="pre">/app_dev.php/</span></tt>. This
is the front controller I was explaining above, and as you can see the use of <tt class="docutils literal"><span class="pre">path</span></tt> has maintained
it.</p>
<p>Finally lets update the logo links to redirect you back to the homepage. Update the
template located at <tt class="docutils literal"><span class="pre">app/Resources/views/base.html.twig</span></tt>.</p>
<div class="highlight-html"><div class="highlight"><pre><span class="c">&lt;!-- app/Resources/views/base.html.twig --&gt;</span>
<span class="nt">&lt;hgroup&gt;</span>
    <span class="nt">&lt;h2&gt;</span>&#123;&#37; block blog_title &#37;&#125;<span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;&#123;&#123; path(&#39;BloggerBlogBundle_homepage&#39;) &#125;&#125&quot;</span><span class="nt">&gt;</span>symblog<span class="nt">&lt;/a&gt;</span>&#123;&#37; endblock &#37;&#125; <span class="nt">&lt;/h2&gt;</span>
    <span class="nt">&lt;h3&gt;</span>&#123;&#37; block blog_tagline &#37;&#125;<span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;&#123;&#123; path(&#39;BloggerBlogBundle_homepage&#39;) &#125;&#125&quot;</span><span class="nt">&gt;</span>creating a blog in Symfony2<span class="nt">&lt;/a&gt;</span>&#123;&#37; endblock &#37;&#125; <span class="nt">&lt;/h3&gt;</span>
<span class="nt">&lt;/hgroup&gt;</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="conclusion">
<div class="section-header"><span class="title"><h2>Conclusion</h2></span></div>
<p>We have covered the basic areas with regards to a Symfony2 application including getting
the application configured and up and running. We have started to explore the fundamental concepts
behind a Symfony2 application, including Routing and the Twig templating engine.</p>
<p>Next we will look at creating the Contact page. This page is slightly more involved than the About page
as it allows users to interact with a web form to send us enquiries. The next chapter will introduce
concpets including Validators and Forms.</p>
</div>
</div>
</div>
{% endblock %}